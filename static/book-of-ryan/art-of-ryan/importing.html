<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Importing things - The Book of Ryan</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../getting-ryan.html">Getting Ryan</a></li><li class="chapter-item expanded affix "><li class="part-title">The Art of Ryan</li><li class="chapter-item expanded "><a href="../art-of-ryan/hello-json.html"><strong aria-hidden="true">1.</strong> Hello... Jason!?</a></li><li class="chapter-item expanded "><a href="../art-of-ryan/simple-types.html"><strong aria-hidden="true">2.</strong> Simple types</a></li><li class="chapter-item expanded "><a href="../art-of-ryan/variables.html"><strong aria-hidden="true">3.</strong> Variables</a></li><li class="chapter-item expanded "><a href="../art-of-ryan/not-so-simple-types.html"><strong aria-hidden="true">4.</strong> Not-so-simple types</a></li><li class="chapter-item expanded "><a href="../art-of-ryan/importing.html" class="active"><strong aria-hidden="true">5.</strong> Importing things</a></li><li class="chapter-item expanded "><a href="../art-of-ryan/pattern-matching.html"><strong aria-hidden="true">6.</strong> Pattern matching</a></li><li class="chapter-item expanded "><a href="../types.html"><strong aria-hidden="true">7.</strong> Types</a></li><li class="chapter-item expanded "><a href="../art-of-ryan/comprehensions.html"><strong aria-hidden="true">8.</strong> Comprehensions</a></li><li class="chapter-item expanded affix "><li class="part-title">Integrating Ryan</li><li class="chapter-item expanded "><a href="../integrating/the-ryan-cli.html"><strong aria-hidden="true">9.</strong> The Ryan CLI</a></li><li class="chapter-item expanded "><a href="../integrating/rust.html"><strong aria-hidden="true">10.</strong> Rust</a></li><li class="chapter-item expanded "><a href="../integrating/python.html"><strong aria-hidden="true">11.</strong> Python</a></li><li class="chapter-item expanded "><a href="../integrating/javascript.html"><strong aria-hidden="true">12.</strong> JavaScript</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="../reference/built-ins.html"><strong aria-hidden="true">13.</strong> List of built-ins</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Book of Ryan</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="importing-things"><a class="header" href="#importing-things">Importing things</a></h1>
<p>Keeping with the theme of reusing code that we introduced when talking about <a href="./variables.html">variables</a>, Ryan also you to use a whole <code>.ryan</code> file as a kind of variable in other <code>.ryan</code> files. Imagine that you have a big projects in which you need to have many <code>.ryan</code> files for many different purposes. Normally, it's the case that you need to share a couple of variables between all these files, for example a username or a link to a shared resource. It would be a pain to have to redeclare it in every file, not to say dangerous if you ever need to change its value.</p>
<p>To cope with this scenario, you could create a <code>common.ryan</code> with all the repeated values and then, in each file, just do</p>
<pre><code class="language-ryan">let common = import &quot;common.ryan&quot;;
</code></pre>
<p>This will evaluate the contents of <code>common.ryan</code> and put it in the variable <code>common</code>. The file <code>common.ryan</code> must be in the same directory as the file containing the import statement, otherwise Ryan won't be able to find it. If your file is in another path, you can use your operational system's path system to locate it:</p>
<pre><code class="language-ryan">let common = import &quot;../other-stuff/common.ryan&quot;;       // e.g, in Linux and MacOS
let common = import &quot;C:\Users\ryan\stuff\common.ryan&quot;;  // e.g, in Windows
</code></pre>
<h2 id="customizing-your-files"><a class="header" href="#customizing-your-files">Customizing your files</a></h2>
<p>Another very common use-case for imports is to customize the JSON generated by your <code>.ryan</code> depending on the environment it is executed in. For example, it's very common for programs to be configured differently when testing than when put to run &quot;for real&quot; (also called the <em>production</em> environment). Usernames, passwords and resource names will be completely different to avoid a rogue test to ruin the operation of your system.</p>
<p>Enter <em>environment variables</em>: these are a set of variables that your operational system passes to every program in order to customize its behavior. Of course, you can set these variable directly through the command line:</p>
<pre><code>MY_VAR=1 ryan &lt; my_file.ryan
</code></pre>
<p>This will invoke <code>ryan</code> on <code>my_file.ryan</code> with <code>MY_VAR</code> set to 1. You can then access this variable from your <code>.ryan</code> file as so:</p>
<pre><code class="language-ryan">let my_var = import &quot;env:MY_VAR&quot;;   // my_var will be set to `1`.
</code></pre>
<p>You can pass whole Ryan programs in environment variables, if you wish, although it may not be the most comfortable thing to do. The only restriction is that such programs can only access other environment variables; it cannot touch your files anymore. Therefore, this will not work:</p>
<pre><code class="language-ryan">MY_PROG='import &quot;common.ryan&quot;' ryan &lt; my_file.ryan
</code></pre>
<p>If <code>my_file.ryan</code> tries to <code>import &quot;env:MY_PROG&quot;</code>, an error will be raised.</p>
<h2 id="importing-chunks-of-text"><a class="header" href="#importing-chunks-of-text">Importing chunks of text</a></h2>
<p>Up to now, we have only talked about importing Ryans from Ryans. However, in many cases, it is very quite to import text directly, verbatim. Ryan saves you the trouble of writing quotations and escape sequences by allowing you to import things <code>as text</code>:</p>
<pre><code class="language-ryan">let gilgamesh = import &quot;tale-of-gilgamesh.txt&quot; as text;
</code></pre>
<p>You can also use this with environment imports:</p>
<pre><code class="language-ryan">let username = import &quot;env:USERNAME&quot; as text;       // username is `&quot;Ryan&quot;`.
</code></pre>
<p>If <code>USERNAME</code> is set to <code>Ryan</code>, without the <code>as text</code>, you would get an error: after all the <em>variable</em> <code>Ryan</code> has not been set in your <code>USERNAME</code> program. With the <code>as text</code>, Ryan will understand that we only want the string <code>&quot;Ryan&quot;</code>.</p>
<h2 id="setting-defaults"><a class="header" href="#setting-defaults">Setting defaults</a></h2>
<p>If the imported file does not exist or the environment variable is not set, Ryan will, by default, raise an error. You can provide a default value to override this error using <code>or</code>:</p>
<pre><code class="language-ryan">import &quot;env:FORGOT_TO_SET&quot; or &quot;Ryan&quot;;   // -&gt; &quot;Ryan&quot;
import &quot;does-not-exist.ryan&quot; or {};     // -&gt; (empty dictionary)
</code></pre>
<p>The clause <code>or</code> will force the import to use the default value if, <em>for any reason whatsoever</em> the import fails.</p>
<h2 id="limitations"><a class="header" href="#limitations">Limitations</a></h2>
<h3 id="no-dynamic-imports"><a class="header" href="#no-dynamic-imports">No dynamic imports</a></h3>
<p>Although <code>import</code> expects a string as input, you cannot use an expression that yields a string; the import must be only a literal string. This will not work:</p>
<pre><code class="language-ryan">import &quot;my-&quot; + &quot;file.ryan&quot;
</code></pre>
<p>You can however, go around this limitation in many cases. For example, you can use <code>if ... then ... else ...</code> for conditional imports:</p>
<pre><code class="language-ryan">if 1 == 1 then
    import &quot;this.ryan&quot;
else
    import &quot;that.ryan&quot;
</code></pre>
<p>Even though <code>import</code> does not accept expressions, it can be freely used within expressions to allow for some level of customization.</p>
<h3 id="no-circular-imports"><a class="header" href="#no-circular-imports">No circular imports</a></h3>
<p>Circular imports will result in a nasty, smelly error:</p>
<pre><code class="language-ryan">// tweedledee.ryan:
import &quot;tweedledum.ryan&quot;

// tweedledum.ryan
import &quot;tweedledee.ryan&quot;
</code></pre>
<p>If you ever find yourself in this situation, you will need to restructure your files in order to destroy the cyclic dependency. If <code>a</code> and <code>b</code> depend on each other, you can to put the &quot;depended&quot; part in a third file <code>c</code> and make both <code>a</code> and <code>b</code> depend on this file instead. This &quot;third file trick&quot; solves most, if not all, situations you might encounter.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../art-of-ryan/not-so-simple-types.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../art-of-ryan/pattern-matching.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../art-of-ryan/not-so-simple-types.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../art-of-ryan/pattern-matching.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
